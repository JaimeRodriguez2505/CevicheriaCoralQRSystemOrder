{"ast":null,"code":"import _objectSpread from\"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{compose}from'react-recompose';import{withRouter}from'react-router-dom';import AuthUserContext from'./context';import{withFirebase}from'../Firebase';import*as ROUTES from'../../constants/routes';import{jsx as _jsx}from\"react/jsx-runtime\";var withAuthorization=function withAuthorization(condition){return function(Component){var WithAuthorization=/*#__PURE__*/function(_React$Component){_inherits(WithAuthorization,_React$Component);var _super=_createSuper(WithAuthorization);function WithAuthorization(){_classCallCheck(this,WithAuthorization);return _super.apply(this,arguments);}_createClass(WithAuthorization,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;var currentUrl=window.location.href.split('').slice(window.location.href.length-7).join('');var visitingAccount=currentUrl===\"account\"?true:false;this.listener=this.props.firebase.onAuthUserListener(function(authUser){// demo version validation\nif(authUser.isAnonymous&&visitingAccount){_this.props.history.push(ROUTES.HOME);}if(!condition(authUser)){_this.props.history.push(ROUTES.SIGN_IN);}},function(){return _this.props.history.push(ROUTES.SIGN_IN);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.listener();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(AuthUserContext.Consumer,{children:function children(authUser){return condition(authUser)?/*#__PURE__*/_jsx(Component,_objectSpread({},_this2.props)):null;}});}}]);return WithAuthorization;}(React.Component);return compose(withRouter,withFirebase)(WithAuthorization);};};export default withAuthorization;","map":{"version":3,"names":["React","compose","withRouter","AuthUserContext","withFirebase","ROUTES","jsx","_jsx","withAuthorization","condition","Component","WithAuthorization","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","componentDidMount","_this","currentUrl","window","location","href","split","slice","length","join","visitingAccount","listener","props","firebase","onAuthUserListener","authUser","isAnonymous","history","push","HOME","SIGN_IN","componentWillUnmount","render","_this2","Consumer","children","_objectSpread"],"sources":["/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/src/components/Session/withAuthorization.js"],"sourcesContent":["import React from 'react';\nimport { compose } from 'react-recompose';\nimport { withRouter } from 'react-router-dom';\n\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      let currentUrl = window.location.href.split('').slice(window.location.href.length-7).join('');\n      let visitingAccount = currentUrl === \"account\" ? true : false;\n      this.listener = this.props.firebase.onAuthUserListener(\n        authUser => {\n          // demo version validation\n          if(authUser.isAnonymous && visitingAccount) {\n            this.props.history.push(ROUTES.HOME);\n          }\n          if (!condition(authUser)) {\n            this.props.history.push(ROUTES.SIGN_IN);\n          }\n        },\n        () => this.props.history.push(ROUTES.SIGN_IN),\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            condition(authUser) ? <Component {...this.props} /> : null\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return compose(\n    withRouter,\n    withFirebase,\n  )(WithAuthorization);\n};\n\nexport default withAuthorization;\n"],"mappings":"01BAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,MAAO,CAAAC,eAAe,KAAM,WAAW,CACvC,OAASC,YAAY,KAAQ,aAAa,CAC1C,MAAO,GAAK,CAAAC,MAAM,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEjD,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAGC,SAAS,QAAI,UAAAC,SAAS,CAAI,IAC5C,CAAAC,iBAAiB,uBAAAC,gBAAA,EAAAC,SAAA,CAAAF,iBAAA,CAAAC,gBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,iBAAA,WAAAA,kBAAA,EAAAK,eAAA,MAAAL,iBAAA,SAAAG,MAAA,CAAAG,KAAA,MAAAC,SAAA,GAAAC,YAAA,CAAAR,iBAAA,GAAAS,GAAA,qBAAAC,KAAA,CACrB,SAAAC,kBAAA,CAAoB,KAAAC,KAAA,MAClB,GAAI,CAAAC,UAAU,CAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC,CAACC,KAAK,CAACJ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACG,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAC7F,GAAI,CAAAC,eAAe,CAAGR,UAAU,GAAK,SAAS,CAAG,IAAI,CAAG,KAAK,CAC7D,IAAI,CAACS,QAAQ,CAAG,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACC,kBAAkB,CACpD,SAAAC,QAAQ,CAAI,CACV;AACA,GAAGA,QAAQ,CAACC,WAAW,EAAIN,eAAe,CAAE,CAC1CT,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACoC,IAAI,CAAC,CACtC,CACA,GAAI,CAAChC,SAAS,CAAC4B,QAAQ,CAAC,CAAE,CACxBd,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACqC,OAAO,CAAC,CACzC,CACF,CAAC,CACD,iBAAM,CAAAnB,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACqC,OAAO,CAAC,GAC9C,CACH,CAAC,GAAAtB,GAAA,wBAAAC,KAAA,CAED,SAAAsB,qBAAA,CAAuB,CACrB,IAAI,CAACV,QAAQ,EAAE,CACjB,CAAC,GAAAb,GAAA,UAAAC,KAAA,CAED,SAAAuB,OAAA,CAAS,KAAAC,MAAA,MACP,mBACEtC,IAAA,CAACJ,eAAe,CAAC2C,QAAQ,EAAAC,QAAA,CACtB,SAAAA,SAAAV,QAAQ,QACP,CAAA5B,SAAS,CAAC4B,QAAQ,CAAC,cAAG9B,IAAA,CAACG,SAAS,CAAAsC,aAAA,IAAKH,MAAI,CAACX,KAAK,EAAI,CAAG,IAAI,IAEnC,CAE/B,CAAC,WAAAvB,iBAAA,GA9B6BX,KAAK,CAACU,SAAS,EAiC/C,MAAO,CAAAT,OAAO,CACZC,UAAU,CACVE,YAAY,CACb,CAACO,iBAAiB,CAAC,CACtB,CAAC,GAED,cAAe,CAAAH,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}