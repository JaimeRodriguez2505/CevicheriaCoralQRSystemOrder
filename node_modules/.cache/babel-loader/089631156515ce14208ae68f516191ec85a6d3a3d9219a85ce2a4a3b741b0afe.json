{"ast":null,"code":"import _objectSpread from \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/src/components/Session/withAuthorization.js\";\nimport React from 'react';\nimport { compose } from 'react-recompose';\nimport { withRouter } from 'react-router-dom';\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar withAuthorization = function withAuthorization(condition) {\n  return function (Component) {\n    var WithAuthorization = /*#__PURE__*/function (_React$Component) {\n      _inherits(WithAuthorization, _React$Component);\n      var _super = _createSuper(WithAuthorization);\n      function WithAuthorization() {\n        _classCallCheck(this, WithAuthorization);\n        return _super.apply(this, arguments);\n      }\n      _createClass(WithAuthorization, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this = this;\n          var currentUrl = window.location.href.split('').slice(window.location.href.length - 7).join('');\n          var visitingAccount = currentUrl === \"account\" ? true : false;\n          this.listener = this.props.firebase.onAuthUserListener(function (authUser) {\n            // demo version validation\n            if (authUser.isAnonymous && visitingAccount) {\n              _this.props.history.push(ROUTES.HOME);\n            }\n            if (!condition(authUser)) {\n              _this.props.history.push(ROUTES.SIGN_IN);\n            }\n          }, function () {\n            return _this.props.history.push(ROUTES.SIGN_IN);\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.listener();\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n          return /*#__PURE__*/_jsxDEV(AuthUserContext.Consumer, {\n            children: function children(authUser) {\n              return condition(authUser) ? /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, _this2.props), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 36,\n                columnNumber: 35\n              }, _this2) : null;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 9\n          }, this);\n        }\n      }]);\n      return WithAuthorization;\n    }(React.Component);\n    return compose(withRouter, withFirebase)(WithAuthorization);\n  };\n};\nexport default withAuthorization;","map":{"version":3,"names":["React","compose","withRouter","AuthUserContext","withFirebase","ROUTES","jsxDEV","_jsxDEV","withAuthorization","condition","Component","WithAuthorization","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","componentDidMount","_this","currentUrl","window","location","href","split","slice","length","join","visitingAccount","listener","props","firebase","onAuthUserListener","authUser","isAnonymous","history","push","HOME","SIGN_IN","componentWillUnmount","render","_this2","Consumer","children","_objectSpread","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/soulkin/Documents/Cevicheria-Coral/Qr-Menu-Coral copy/CevicheriaCoralQRSystemOrder/src/components/Session/withAuthorization.js"],"sourcesContent":["import React from 'react';\nimport { compose } from 'react-recompose';\nimport { withRouter } from 'react-router-dom';\n\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      let currentUrl = window.location.href.split('').slice(window.location.href.length-7).join('');\n      let visitingAccount = currentUrl === \"account\" ? true : false;\n      this.listener = this.props.firebase.onAuthUserListener(\n        authUser => {\n          // demo version validation\n          if(authUser.isAnonymous && visitingAccount) {\n            this.props.history.push(ROUTES.HOME);\n          }\n          if (!condition(authUser)) {\n            this.props.history.push(ROUTES.SIGN_IN);\n          }\n        },\n        () => this.props.history.push(ROUTES.SIGN_IN),\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser =>\n            condition(authUser) ? <Component {...this.props} /> : null\n          }\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n\n  return compose(\n    withRouter,\n    withFirebase,\n  )(WithAuthorization);\n};\n\nexport default withAuthorization;\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,UAAU,QAAQ,kBAAkB;AAE7C,OAAOC,eAAe,MAAM,WAAW;AACvC,SAASC,YAAY,QAAQ,aAAa;AAC1C,OAAO,KAAKC,MAAM,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAGC,SAAS;EAAA,OAAI,UAAAC,SAAS,EAAI;IAAA,IAC5CC,iBAAiB,0BAAAC,gBAAA;MAAAC,SAAA,CAAAF,iBAAA,EAAAC,gBAAA;MAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,iBAAA;MAAA,SAAAA,kBAAA;QAAAK,eAAA,OAAAL,iBAAA;QAAA,OAAAG,MAAA,CAAAG,KAAA,OAAAC,SAAA;MAAA;MAAAC,YAAA,CAAAR,iBAAA;QAAAS,GAAA;QAAAC,KAAA,EACrB,SAAAC,kBAAA,EAAoB;UAAA,IAAAC,KAAA;UAClB,IAAIC,UAAU,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC,CAACC,KAAK,CAACJ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACG,MAAM,GAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;UAC7F,IAAIC,eAAe,GAAGR,UAAU,KAAK,SAAS,GAAG,IAAI,GAAG,KAAK;UAC7D,IAAI,CAACS,QAAQ,GAAG,IAAI,CAACC,KAAK,CAACC,QAAQ,CAACC,kBAAkB,CACpD,UAAAC,QAAQ,EAAI;YACV;YACA,IAAGA,QAAQ,CAACC,WAAW,IAAIN,eAAe,EAAE;cAC1CT,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACoC,IAAI,CAAC;YACtC;YACA,IAAI,CAAChC,SAAS,CAAC4B,QAAQ,CAAC,EAAE;cACxBd,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACqC,OAAO,CAAC;YACzC;UACF,CAAC,EACD;YAAA,OAAMnB,KAAI,CAACW,KAAK,CAACK,OAAO,CAACC,IAAI,CAACnC,MAAM,CAACqC,OAAO,CAAC;UAAA,EAC9C;QACH;MAAC;QAAAtB,GAAA;QAAAC,KAAA,EAED,SAAAsB,qBAAA,EAAuB;UACrB,IAAI,CAACV,QAAQ,EAAE;QACjB;MAAC;QAAAb,GAAA;QAAAC,KAAA,EAED,SAAAuB,OAAA,EAAS;UAAA,IAAAC,MAAA;UACP,oBACEtC,OAAA,CAACJ,eAAe,CAAC2C,QAAQ;YAAAC,QAAA,EACtB,SAAAA,SAAAV,QAAQ;cAAA,OACP5B,SAAS,CAAC4B,QAAQ,CAAC,gBAAG9B,OAAA,CAACG,SAAS,EAAAsC,aAAA,KAAKH,MAAI,CAACX,KAAK;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,GAAAP,MAAA,CAAI,GAAG,IAAI;YAAA;UAAA;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAEnC;QAE/B;MAAC;MAAA,OAAAzC,iBAAA;IAAA,EA9B6BX,KAAK,CAACU,SAAS;IAiC/C,OAAOT,OAAO,CACZC,UAAU,EACVE,YAAY,CACb,CAACO,iBAAiB,CAAC;EACtB,CAAC;AAAA;AAED,eAAeH,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}